<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel='stylesheet' type='text/css' href='cssTimetable.css'>
        <title>Add New Requests</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script type="text/javascript">
        
        $(document).ready(function(){wrInputTable()});
        $(document).ready(function(){loadDefaultWeeks()});
		//pOrT stands for 'Period or Time' - to reflect user preferences
        var pOrTHeader = "Period";
        var pOrTChildren = ["1","2","3","4","5","6","7","8","9"];
        var days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];
        function wrInputTable(){
        
			var codeStr = "";
           
            codeStr += "<table id='inputTable'>";
            
            //headers
            codeStr += "<tr>";
            codeStr += "<th class ='daysHeader' rowspan='2'>Days</th>";
            codeStr += "<th class ='pOrTHeader' colspan='9'>" + pOrTHeader + "</th>";
            codeStr += "</tr>";
            
            //pOrT children
            codeStr += "<tr>";
            for(var i = 0;i<pOrTChildren.length;i++){
                codeStr += "<th class ='pOrTChildren'>" + pOrTChildren[i] + "</th>"; 
            }
             codeStr += "</tr>";
            
            //days and grid
            for(var j = 1;j<=days.length;j++){
                codeStr += "<tr>";
                codeStr += "<th class ='daysChildren'>" + days[j-1] + "</th>";
                for(var k = 1;k<=pOrTChildren.length;k++){
                    codeStr += "<td class='grid' onclick='tableSelect(this.id)' id='" + j + k + "'></td>";
                }
                codeStr += "</tr>";
            }
            
            codeStr += "</table>";
            //insert into inputTableBox
            $("#inputTableBox").append(codeStr);
        }
        
        function tableSelect(gridRef){
            
            //alert(gridRef);
            $("#" + gridRef).toggleClass("gridClicked");

        }
        
        function loadDefaultWeeks(){
            $("#wk1").prop('checked',true);
            $("#wk2").prop('checked',true);
            $("#wk3").prop('checked',true);
            $("#wk4").prop('checked',true);
            $("#wk5").prop('checked',true);
            $("#wk6").prop('checked',true);
            $("#wk7").prop('checked',true);
            $("#wk8").prop('checked',true);
            $("#wk9").prop('checked',true);
            $("#wk10").prop('checked',true);
            $("#wk11").prop('checked',true);
            $("#wk12").prop('checked',true);
            $("#wk13").prop('checked',false);
            $("#wk14").prop('checked',false);
            $("#wk15").prop('checked',false);
        }
        
        function getWeeksSelectionArray(){
            var wksArray = [];
            if($("#wk1").is(':checked')){wksArray.push(1);}
            if($("#wk2").is(':checked')){wksArray.push(2);}
            if($("#wk3").is(':checked')){wksArray.push(3);}
            if($("#wk4").is(':checked')){wksArray.push(4);}
            if($("#wk5").is(':checked')){wksArray.push(5);}
            if($("#wk6").is(':checked')){wksArray.push(6);}
            if($("#wk7").is(':checked')){wksArray.push(7);}
            if($("#wk8").is(':checked')){wksArray.push(8);}
            if($("#wk9").is(':checked')){wksArray.push(9);}
            if($("#wk10").is(':checked')){wksArray.push(10);}
            if($("#wk11").is(':checked')){wksArray.push(11);}
            if($("#wk12").is(':checked')){wksArray.push(12);}
            if($("#wk13").is(':checked')){wksArray.push(13);}
            if($("#wk14").is(':checked')){wksArray.push(14);}
            if($("#wk15").is(':checked')){wksArray.push(15);}
            return wksArray;    
        }
        var lineArray = ["","","","","",""]; // six as we want to start from pos 1, instead of 0
		function selectedPeriods(){
			for(var line=1;line<=days.length;line++){
				for(var cPeriod =1;cPeriod<=pOrTChildren.length;cPeriod++){
					if ($("#"+line+cPeriod).hasClass("gridClicked"))
					{
						lineArray[line]=lineArray[line]+""+cPeriod;
					}
			}
			//returns selected periods
			alert(lineArray[1]+ " " +lineArray[2]+ " " + lineArray[3]+ " " + lineArray[4]+ " " + lineArray[5]+ " " );
			Consecutive();
		}
		
		function Consecutive(){
			for(var i = 0; i <=lineArray.length;i++){
				for(var j = 0;j < lineArray[i].length-1;j++){
					if((parseInt(lineArray[i].charAt(j))==(parseInt(lineArray[i].charAt(j+1))-1)){
							//error line below...
						alert(lineArray[i].charAt(j) + " " + lineArray[i].charAt(j+1));
					}
				}
			}
		}
        </script>
    </head>
    
    <body> 
        <div id="navwrap">
            <ul id="topnav">
                <li><a href="viewRequests.htm"><img src="LU-mark-rgb.png" alt="Home"></a></li>
                <li><a href="addRequests.htm">Add New Requests</a></li>
                <li><a href="viewTimetable.htm">View Timetable</a></li>
                <li><a href="helpPage.htm">Help</a></li>
                <li><a href="accountPage.htm">Username(pref)</a></li>
                <li><a href="login.htm">Logout</a></li>
            </ul>
        </div>
        <div id="pagewrap">
            <div class="contentBox" id="basicBox"></div>
            
            <div class="contentBox" id="roomActionsBox"></div>
            
            <div class="contentBox" id="roomSelectorBox"></div>
            
            <div class="contentBox" id="inputWeeksBox">
                <!-- unsure if css is css3  -->
                <label id="wkLabel">Weeks</label></td>
                <input type="checkbox" class="wkInput" id="wk1" ><label for="wk1">1</label>
                <input type="checkbox" class="wkInput" id="wk2" ><label for="wk2">2</label>
                <input type="checkbox" class="wkInput" id="wk3" ><label for="wk3">3</label>
                <input type="checkbox" class="wkInput" id="wk4" ><label for="wk4">4</label>
                <input type="checkbox" class="wkInput" id="wk5" ><label for="wk5">5</label>
                <input type="checkbox" class="wkInput" id="wk6" ><label for="wk6">6</label>
                <input type="checkbox" class="wkInput" id="wk7" ><label for="wk7">7</label>
                <input type="checkbox" class="wkInput" id="wk8" ><label for="wk8">8</label>
                <input type="checkbox" class="wkInput" id="wk9" ><label for="wk9">9</label>
                <input type="checkbox" class="wkInput" id="wk10" ><label for="wk10">10</label>
                <input type="checkbox" class="wkInput" id="wk11" ><label for="wk11">11</label>
                <input type="checkbox" class="wkInput" id="wk12" ><label for="wk12">12</label>
                <input type="checkbox" class="wkInput" id="wk13"><label for="wk13">13</label>
                <input type="checkbox" class="wkInput" id="wk14"><label for="wk14">14</label>
                <input type="checkbox" class="wkInput" id="wk15"><label for="wk15">15</label>
            </div>
            
            <div class="contentBox" id="inputTableBox">

			</div>
            <div class="contentBox" id="formControlsBox">
				<form>
                    <input type="button" value="Submit" onclick="selectedPeriods()">  <!--changed to button from submit  for testing purposes-->
                    <input type="button" value="Submit & Add Another">
                    <input type="button" value="Clear Form">
                </form>
            </div>
        </div>
    </body>
</html>